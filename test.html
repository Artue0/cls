<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lootbox Animation</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            height: 100vh;
            background-color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .lootbox-container {
            position: relative;
            width: 100%;
            height: 100px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            background-color: #00000069;
            padding-top: 35px;
            padding-bottom: 35px;
        }

        .box {
            position: absolute;
            width: 130px;
            height: 100px;
            background-color: #555;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            color: #fff;
            box-shadow: inset 0px -100px 100px -90px var(--color);
            background-image: radial-gradient(rgb(142, 142, 142), #00000000);
        }


        .box::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            height: 7px;
            background-color: var(--color);
        }

        .pointer {
            position: absolute;
            left: 50%;
            top: 0;
            width: 5px;
            height: 100%;
            background-color: yellow;
            z-index: 5;
        }

    </style>
</head>
<body>
    <script>
        const lootboxContainer = document.getElementById('lootboxContainer');
        const boxWidth = 130;
        const containerWidth = lootboxContainer.offsetWidth;

        function createBox(content, c) {
            const box = document.createElement('div');
            box.classList.add('box');
            box.innerText = content;
            box.style.setProperty('--color', c);
            return box;
        }

        function startAnimation() {
            let boxes = [];
            let speed = 18;
            const deceleration = 0.997;
            const minSpeed = 0.5;

            function update() {
                boxes = boxes.filter(box => {
                    if (box.offsetLeft + boxWidth < 0) {
                        lootboxContainer.removeChild(box);
                        return false;
                    }
                    return true;
                });

                while (boxes.length < 20) {
                    const lastBox = boxes[boxes.length - 1];
                    let rand = Math.floor(Math.random() * 100) + 1;
                    let textContent, color;
                    switch (true) {
                        case rand >= 1 && rand <= 35:
                            textContent = 'Common';
                            color = 'gray';
                            break;
                        case rand > 35 && rand <= 60:
                            textContent = 'Uncommon';
                            color = 'green';
                            break;
                        case rand > 60 && rand <= 75:
                            textContent = 'Rare';
                            color = 'blue';
                            break;
                        case rand > 75 && rand <= 85:
                            textContent = 'Epic';
                            color = 'purple';
                            break;
                        case rand > 85 && rand <= 95:
                            textContent = 'Mythic';
                            color = 'red';
                            break;
                        case rand > 95 && rand <= 100:
                            textContent = 'Legendary';
                            color = 'gold';
                            break;
                    }
                    const newBox = createBox(textContent, color);
                    lootboxContainer.appendChild(newBox);
                    newBox.style.left = lastBox ? `${lastBox.offsetLeft + boxWidth + 15}px` : `${containerWidth}px`;
                    boxes.push(newBox);
                }

                boxes.forEach(box => {
                    box.style.left = `${box.offsetLeft - speed}px`;
                });

                speed = Math.max(speed * deceleration, minSpeed);

                requestAnimationFrame(update);
            }

            update();
        }

        startAnimation();

    </script>
</body>
</html>
